<!DOCTYPE HTML>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>NhatLee ‚ù§Ô∏è NSuong</title>
<style>
  /* ========== N·ªÄN & FONT ========== */
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

  html, body {
    margin: 0; padding: 0; height: 100%;
    background: linear-gradient(135deg, #ff9acb, #ff4f81, #b30059, #ff77aa);
    background-size: 400% 400%;
    animation: bgMove 10s ease infinite;
    overflow-x: hidden; color: #fff;
    font-family: 'Poppins', sans-serif;
    scroll-behavior: smooth;
  }

  @keyframes bgMove {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
  }

  /* ========== HEADER ========== */
  header {
    position: fixed;
    top: 0; left: 0; width: 100%;
    display: flex; justify-content: center;
    padding: 10px 30px;
    background: rgba(255, 150, 180, 0.08);
    backdrop-filter: blur(10px);
    box-shadow: 0 0 20px rgba(255,100,150,0.3);
    z-index: 30;
    animation: fadeDown 1.5s ease;
  }

  #timer {
    font-size: 1em;
    font-weight: 600;
    color: #ffe6f2;
    text-shadow: 0 0 10px #ff7fb5, 0 0 20px #ff4f81;
    animation: glow 3s ease-in-out infinite alternate;
  }

  @keyframes glow {
    from { text-shadow: 0 0 10px #ff4f81, 0 0 20px #ff99c8; }
    to { text-shadow: 0 0 25px #ffcce0, 0 0 45px #ff7fb5; }
  }

  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-30px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* ========== MAIN ========== */
  main {
    position: relative;
    z-index: 20;
    text-align: center;
    padding-top: 110px;
    padding-bottom: 80px;
  }

  /* ========== ·∫¢NH C·∫∂P ƒê√îI ========== */
  .lover-section {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 60px;
    flex-wrap: wrap;
    margin-top: 60px;
    animation: fadeIn 1.6s ease;
  }

  .lover-img {
    width: 250px;
    height: 250px;
    border-radius: 50%;
    overflow: hidden;
    box-shadow: 0 0 40px #ff77aa, inset 0 0 20px #ffb6d9;
    animation: pulse 3s infinite ease-in-out;
    transition: transform 0.5s, box-shadow 0.4s;
  }

  .lover-img:hover { transform: scale(1.08) rotate(3deg); box-shadow: 0 0 80px #ff9acb; }

  .lover-img img {
    width: 100%; height: 100%;
    object-fit: cover;
    display: block;
    filter: saturate(1.05) contrast(1.02);
  }

  @keyframes pulse {
    0%,100% { transform: scale(1); box-shadow: 0 0 20px #ff4f81; }
    50% { transform: scale(1.04); box-shadow: 0 0 60px #ff99cc; }
  }

  /* ========== TR√ÅI TIM ========== */
  .heart {
    position: relative;
    width: 160px; height: 160px;
    background: radial-gradient(circle at 30% 30%, #ff4f81, #ff0066);
    transform: rotate(-45deg);
    animation: heartbeat 1.5s infinite;
    box-shadow: 0 0 60px #ff8abf;
    perspective: 1000px;
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
  }

  .heart::before, .heart::after {
    content: '';
    position: absolute;
    width: 160px; height: 160px;
    background: radial-gradient(circle at 40% 40%, #ff4f81, #ff0066);
    border-radius: 50%;
    filter: blur(0.8px);
    opacity: 0.98;
  }
  .heart::before { top: -80px; left: 0; }
  .heart::after { left: 80px; top: 0; }

  @keyframes heartbeat {
    0%,100% { transform: rotate(-45deg) scale(1); box-shadow: 0 0 40px #ff4f81; }
    50% { transform: rotate(-45deg) scale(1.12); box-shadow: 0 0 120px #ffb6d9; }
  }

  .heart-center {
    animation: spinHeart 12s linear infinite;
    transform-style: preserve-3d;
  }

  @keyframes spinHeart {
    from { transform: rotateY(0deg) rotate(-45deg); }
    to { transform: rotateY(360deg) rotate(-45deg); }
  }

  /* ========== CH·ªÆ TI√äU ƒê·ªÄ ========== */
  h1 {
    margin-top: 62px;
    font-size: 3.3em;
    letter-spacing: 1px;
    background: linear-gradient(90deg, #ff99c8, #ff4f81, #ffcce0, #ff80ab);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 30px rgba(255,128,171,0.8);
    animation: gradientMove 6s ease infinite, floatUpDown 3.2s ease-in-out infinite;
    display: inline-block;
    padding: 6px 12px;
    border-radius: 12px;
    position: relative;
  }

  /* shine effect */
  h1::after {
    content: '';
    position: absolute;
    top: -10%;
    left: -10%;
    width: 40%;
    height: 120%;
    background: linear-gradient(90deg, rgba(255,255,255,0.18), rgba(255,255,255,0.02), rgba(255,255,255,0.06));
    transform: rotate(25deg) translateX(-120%);
    filter: blur(6px);
    animation: shine 3.8s linear infinite;
    border-radius: 8px;
    pointer-events: none;
  }

  @keyframes shine {
    0% { transform: rotate(25deg) translateX(-120%); opacity: 0; }
    40% { transform: rotate(25deg) translateX(20%); opacity: 1; }
    100% { transform: rotate(25deg) translateX(120%); opacity: 0; }
  }

  @keyframes gradientMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  @keyframes floatUpDown {
    0%,100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }

  /* typing subtitle */
  #subtitle {
    font-size: 1.05rem;
    margin-top: 8px;
    opacity: 0.95;
    letter-spacing: 0.3px;
    color: rgba(255,244,246,0.95);
  }

  /* ========== ƒêO·∫†N VƒÇN ========== */
  .love-text {
    width: 86%;
    max-width: 820px;
    margin: 30px auto 50px;
    font-size: 1.18em;
    line-height: 1.8;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border-radius: 22px;
    padding: 26px 34px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.12), inset 0 0 18px rgba(255,255,255,0.02);
    animation: fadeIn 1.8s ease;
    backdrop-filter: blur(4px);
  }

  .love-text p {
    opacity: 0;
    animation: appearText 1s forwards;
  }
  .love-text p:nth-child(1) { animation-delay: 0.4s; }
  .love-text p:nth-child(2) { animation-delay: 1.2s; }

  @keyframes appearText {
    0% { opacity: 0; transform: translateY(18px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(25px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* ========== SLIDESHOW ========== */
  .slideshow {
    position: relative;
    margin: 60px auto;
    width: 86%;
    max-width: 820px;
    height: auto;
    overflow: hidden;
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.25);
    animation: fadeIn 1.6s ease;
  }

  .slideshow img {
    width: 100%;
    border-radius: 16px;
    transition: opacity 1s ease-in-out, transform 1s ease;
    display: block;
  }

  /* arrows */
  .arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255,255,255,0.06);
    border: none;
    color: #fff;
    padding: 10px;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 4px 18px rgba(0,0,0,0.4);
    transition: transform 0.2s ease;
    z-index: 25;
  }
  .arrow:hover { transform: translateY(-50%) scale(1.06); }
  .arrow.left { left: 14px; }
  .arrow.right { right: 14px; }

  /* ========== N√öT NH·∫†C ========== */
  #musicBtn {
    position: fixed;
    bottom: 25px;
    right: 25px;
    background: radial-gradient(circle at 30% 30%, #ff4f81, #ff1a75);
    border: none;
    border-radius: 50%;
    width: 56px; height: 56px;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    box-shadow: 0 0 25px #ff4f81, 0 0 50px #ff99cc;
    transition: transform 0.4s, box-shadow 0.4s;
    z-index: 40;
  }

  #musicBtn:hover {
    transform: scale(1.14) rotate(8deg);
    box-shadow: 0 0 40px #ffb6d9, 0 0 90px #ff80ab;
  }

  #musicBtn svg { fill: #fff; width: 26px; height: 26px; }

  /* ========== FOOTER ========== */
  footer {
    text-align: center;
    font-size: 0.9em;
    opacity: 0.85;
    margin-bottom: 20px;
    animation: fadeIn 1.6s ease;
    z-index: 10;
  }

  /* ========== PINKBOARD BACKGROUND ========== */
  #pinkboard {
    position: fixed; top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
    pointer-events: none;
    filter: drop-shadow(0 0 20px #ff80ab);
  }

  /* ========== MINI HEARTS BAY ========== */
  .mini-heart {
    position: fixed;
    bottom: -20px;
    font-size: 16px;
    opacity: 0.95;
    color: #ff99c8;
    animation: floatUp linear forwards;
    z-index: 15;
    text-shadow: 0 0 10px rgba(255,255,255,0.08);
    transform-origin: center;
  }

  @keyframes floatUp {
    0% { transform: translateY(0) scale(0.6) rotate(0deg); opacity: 1; }
    30% { transform: translateY(-30vh) scale(0.9) rotate(10deg); opacity: 0.95; }
    100% { transform: translateY(-120vh) scale(1.4) rotate(30deg); opacity: 0; }
  }

  /* responsive tweaks */
  @media (max-width: 600px) {
    h1 { font-size: 2.1rem; }
    .lover-img { width: 200px; height: 200px; }
    .heart { width: 120px; height: 120px; }
    .love-text { padding: 18px; font-size: 1rem; }
    .slideshow { margin: 40px 10px; }
  }
</style>
</head>

<body>
  <canvas id="pinkboard"></canvas>
  <header><div id="timer">üíû C√πng nhau 0 ng√†y 0 gi·ªù 0 ph√∫t 0 gi√¢y üíû</div></header>

  <main>
    <div class="lover-section">
      <div class="lover-img"><img src="https://i.postimg.cc/WzsKhcD1/image.png" alt="NhatLee"></div>
      <div class="lover-img"><img src="https://i.postimg.cc/GmTM3mMP/image.png" alt="NSuong"></div>
    </div>

    <h1>NhatLee ‚ù§Ô∏è NSuong</h1>
    <div id="subtitle">M·ªôt h√†nh tr√¨nh, hai tr√°i tim ‚Äî m·ªói gi√¢y ƒë·ªÅu ƒë√°ng nh·ªõ</div>

    <div class="love-text">
      <p>T√¨nh y√™u anh d√†nh cho em b√© c·ªßa anh l√∫c n√†o c≈©ng ƒëong ƒë·∫ßy. Anh kh√¥ng gi·ªèi ƒÉn n√≥i nh∆∞ng anh tin v√† anh lu√¥n c·ªë g·∫Øng iu th∆∞∆°ng em b√© c·ªßa anh nhi·ªÅu nh·∫•t.</p>      
      <p>B√™n c·∫°nh t√¨nh y√™u ƒë√≥. Anh lu√¥n mu·ªën n√≥i l·ªùi c·∫£m ∆°n em. V√¨ ƒë√£ ƒë·∫øn b√™n c·∫°nh anh, c√πng anh tr·∫£i qua bao nhi√™u chuy·ªán m√† v·∫´n ·ªü ƒë√¢y v·ªõi anh. Em nh∆∞ chi·∫øm ph·∫ßn l·ªõn t√¢m tr√≠ c·ªßa anh v·∫≠y kh√¥ng c√≥ em cu·ªôc s·ªëng anh s·∫Ω bu·ªìn v√† t·∫ª nh·∫°t v√¥ c√πng.</p>
      <p>Anh L√™ Minh Nh·∫≠t ch·ªâ c√≥ m·ªôt em b√© duy nh·∫•t, ch·ªâ iu m·ªôt m√¨nh b√© Nguy·ªÖn Ng·ªçc S∆∞∆°ng hoi. Em ·∫•y l√† tuy·ªát nh·∫•t, kh√¥ng c√≥ c√¢u ca l·ªùi vƒÉn n√†o c√≥ th·ªÉ mi√™u t·∫£ ƒë∆∞·ª£c. Iuuuuuuuuuu em.</p>
    </div>

    <div class="slideshow" aria-label="Slideshow ·∫£nh k·ª∑ ni·ªám">
      <button class="arrow left" id="prevBtn" aria-label="·∫¢nh tr∆∞·ªõc">‚óÄ</button>
      <img id="slideImg" src="https://picsum.photos/820/420?random=1" alt="·∫¢nh k·ª∑ ni·ªám">
      <button class="arrow right" id="nextBtn" aria-label="·∫¢nh sau">‚ñ∂</button>
    </div>
  </main>

  <button id="musicBtn" title="B·∫≠t/T·∫Øt nh·∫°c" aria-pressed="false">
    <svg id="musicIcon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
  </button>

  <audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2cbcfb6b5d.mp3?filename=beautiful-piano-ambient-110840.mp3" loop preload="auto"></audio>

  <footer>NhatLee & NgocSuong</footer>

  <script>
  /* ----------------- PINKBOARD PARTICLES (heart-shaped) ----------------- */
  (function(canvas){
    const settings = { particles: { length: 500, duration: 2, velocity: 100, effect: -0.75, size: 30 } };
    var context = canvas.getContext('2d'),
        particles = new (function(length){
          var particles = new Array(length), firstActive = 0, firstFree = 0, duration = settings.particles.duration;
          for (var i=0;i<particles.length;i++) particles[i] = new (function(){
            this.position={x:0,y:0};this.velocity={x:0,y:0};this.acceleration={x:0,y:0};this.age=0;
            this.initialize=function(x,y,dx,dy){this.position.x=x;this.position.y=y;this.velocity.x=dx;this.velocity.y=dy;
              this.acceleration.x=dx*settings.particles.effect;this.acceleration.y=dy*settings.particles.effect;this.age=0;};
            this.update=function(deltaTime){this.position.x+=this.velocity.x*deltaTime;this.position.y+=this.velocity.y*deltaTime;
              this.velocity.x+=this.acceleration.x*deltaTime;this.velocity.y+=this.acceleration.y*deltaTime;this.age+=deltaTime;};
          })();
          this.add=function(x,y,dx,dy){particles[firstFree].initialize(x,y,dx,dy);
            firstFree++;if(firstFree==particles.length)firstFree=0;if(firstActive==firstFree)firstActive++;
            if(firstActive==particles.length)firstActive=0;};
          this.update=function(deltaTime){
            if(firstActive<firstFree){for(var i=firstActive;i<firstFree;i++)particles[i].update(deltaTime);}
            else if(firstFree<firstActive){for(var i=firstActive;i<particles.length;i++)particles[i].update(deltaTime);
              for(var i=0;i<firstFree;i++)particles[i].update(deltaTime);}
            while(particles[firstActive].age>=duration&&firstActive!=firstFree){
              firstActive++;if(firstActive==particles.length)firstActive=0;}
          };
          this.draw=function(context,image){
            if(firstActive<firstFree){for(var i=firstActive;i<firstFree;i++)drawOne(i);}
            else if(firstFree<firstActive){for(var i=firstActive;i<particles.length;i++)drawOne(i);
              for(var i=0;i<firstFree;i++)drawOne(i);}
            function drawOne(i){
              var p=particles[i];var ease=(t)=>((--t)*t*t+1);
              var size=image.width*ease(p.age/duration);
              context.globalAlpha=Math.max(0, 1-p.age/duration);
              context.drawImage(image,p.position.x-size/2,p.position.y-size/2,size,size);
            }
          };
        })(settings.particles.length),
        particleRate=settings.particles.length/settings.particles.duration,
        time;

    function pointOnHeart(t){
      return {x:160*Math.pow(Math.sin(t),3),
              y:130*Math.cos(t)-50*Math.cos(2*t)-20*Math.cos(3*t)-10*Math.cos(4*t)+25};
    }

    var image=(function(){
      var canvas2=document.createElement('canvas'),ctx=canvas2.getContext('2d');
      canvas2.width=settings.particles.size;canvas2.height=settings.particles.size;
      function to(t){var p=pointOnHeart(t);
        p.x=settings.particles.size/2+p.x*settings.particles.size/350;
        p.y=settings.particles.size/2-p.y*settings.particles.size/350;return p;}
      ctx.beginPath();var t=-Math.PI,p=to(t);ctx.moveTo(p.x,p.y);
      while(t<Math.PI){t+=0.01;p=to(t);ctx.lineTo(p.x,p.y);}ctx.closePath();
      var grad = ctx.createRadialGradient(canvas2.width/2, canvas2.height/2, 1, canvas2.width/2, canvas2.height/2, canvas2.width/1.2);
      grad.addColorStop(0, '#fff2f6');
      grad.addColorStop(0.35, '#ff4f81');
      grad.addColorStop(1, '#ff99c8');
      ctx.fillStyle = grad;
      ctx.fill();
      var img=new Image();img.src=canvas2.toDataURL();return img;
    })();

    function render(){
      requestAnimationFrame(render);
      var newTime=new Date().getTime()/1000,deltaTime=newTime-(time||newTime);time=newTime;
      context.clearRect(0,0,canvas.width,canvas.height);
      var amount=particleRate*deltaTime;
      for(var i=0;i<amount;i++){
        var pos=pointOnHeart(Math.PI-2*Math.PI*Math.random());
        var dir={x:pos.x,y:pos.y};
        var len=Math.sqrt(dir.x*dir.x+dir.y*dir.y) || 1;
        dir.x=(dir.x/len)*settings.particles.velocity;
        dir.y=(dir.y/len)*settings.particles.velocity;
        particles.add(canvas.width/2+pos.x,canvas.height/2-pos.y,dir.x,-dir.y);
      }
      particles.update(deltaTime);
      particles.draw(context,image);
    }

    function onResize(){ canvas.width = canvas.clientWidth; canvas.height = canvas.clientHeight; }
    window.addEventListener('resize', onResize);
    setTimeout(function(){ onResize(); render(); }, 10);
  })(document.getElementById('pinkboard'));

  /* ----------------- MINI HEARTS ----------------- */
  (function miniHearts(){
    const colors=['#ff80ab','#ff4f81','#ff99c8','#ffc0cb','#ffb6d9'];
    function createMiniHeart(){
      const heart=document.createElement('div');
      heart.classList.add('mini-heart');
      heart.textContent='‚ù§';
      heart.style.left = (Math.random()*90 + 2) + 'vw';
      heart.style.color = colors[Math.floor(Math.random()*colors.length)];
      heart.style.fontSize = (Math.random()*10 + 12) + 'px';
      const dur = (Math.random()*4 + 5).toFixed(2);
      heart.style.animationDuration = dur + 's';
      heart.style.opacity = (0.7 + Math.random()*0.3).toString();
      document.body.appendChild(heart);
      setTimeout(()=> heart.remove(), (parseFloat(dur) * 1000) + 800);
    }
    // spawn less frequently on mobile
    const interval = (window.innerWidth < 600) ? 600 : 300;
    setInterval(createMiniHeart, interval);
  })();

  /* ----------------- TIMER (ƒë·∫øm t·ª´ ng√†y b·∫Øt ƒë·∫ßu) ----------------- */
  (function timer(){
    // s·ª≠ d·ª•ng m√∫i gi·ªù tr√¨nh duy·ªát; ng√†y b·∫Øt ƒë·∫ßu do b·∫°n cung c·∫•p
    const startDate = new Date("2025-05-08T19:30:00");
    const timerEl = document.getElementById('timer');
    function updateTimer(){
      const now = new Date();
      let diff = Math.floor((now - startDate) / 1000); // seconds
      if (diff < 0) diff = 0;
      const days = Math.floor(diff / (60*60*24));
      diff -= days * 60*60*24;
      const hours = Math.floor(diff / (60*60));
      diff -= hours * 60*60;
      const minutes = Math.floor(diff / 60);
      const seconds = diff - minutes*60;
      timerEl.innerHTML = `üíû B√™n nhau ${days} ng√†y ${hours} gi·ªù ${minutes} ph√∫t ${seconds} gi√¢y üíû`;
    }
    updateTimer();
    setInterval(updateTimer, 1000);
  })();

  /* ----------------- SLIDESHOW (t·ª± chuy·ªÉn + n√∫t) ----------------- */
  (function slideshow(){
    const img = document.getElementById('slideImg');
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    const seeds = [
    "https://i.postimg.cc/XYZVV9Sz/z7133256438888-5799bf974a45ed7a630d68b51d688a5e.jpg",   
    "https://i.postimg.cc/jSWssy0m/z7133256433227-39dabab0424be04bdabbb866c353ba4b.jpg",   
    "https://i.postimg.cc/sgBVV5dT/z7133256430434-82a5bc47f29ae6cf1131356005ec4ff8.jpg",   
    "https://i.postimg.cc/FHf9905b/z7133256420658-81b49a5e8a1b7e8bda84e06f6ce9c64b.jpg",
    "https://i.postimg.cc/2SqzznRb/z7133256416767-8a61072a23a5803b0bef2cacc762ea68.jpg",
    "https://i.postimg.cc/9Q4WWy57/z7133256416347-47f645e0717294a214a18e1dc524f528.jpg",
    "https://i.postimg.cc/FsCr5DqS/z7133256406253-66f408be6b776c11efa6dbaf4c211139.jpg",
    "https://i.postimg.cc/vH2YF3jv/z7133256400157-cac5cafaa8d660453a1b075049f4bb9e.jpg",
    "https://i.postimg.cc/65bWJYSd/z7133256398826-720fc0928f949508cdaf710d44230b8b.jpg",
    "https://i.postimg.cc/L6Q9KN7H/z7133256395464-614351139b3e5f2420949e01fbb620b9.jpg",
    "https://i.postimg.cc/TY3d4Zkv/z7133256350493-75af98e3a83ad543fa3ec0ec041688a0.jpg",
    "https://i.postimg.cc/FsCr5DqK/z7133256365133-f6c1815a04072fea9da7e93faed7acc7.jpg"  
    ];
    let idx = 0;
    let autoTimer = null;

    function show(i){
      img.style.opacity = 0;
      setTimeout(()=> {
        img.src = seeds[i % seeds.length];
        img.style.transform = 'scale(1.03)';
        setTimeout(()=> {
          img.style.opacity = 1;
          img.style.transform = 'scale(1)';
        }, 60);
      }, 300);
    }

    function next(){
      idx = (idx + 1) % seeds.length;
      show(idx);
    }
    function prev(){
      idx = (idx - 1 + seeds.length) % seeds.length;
      show(idx);
    }

    nextBtn.addEventListener('click', ()=> { next(); resetAuto(); });
    prevBtn.addEventListener('click', ()=> { prev(); resetAuto(); });

    function startAuto(){
      autoTimer = setInterval(next, 4500);
    }
    function resetAuto(){
      if (autoTimer) { clearInterval(autoTimer); startAuto(); }
    }

    show(idx);
    startAuto();
  })();

  /* ----------------- MUSIC TOGGLE ----------------- */
  (function music(){
    const musicBtn = document.getElementById('musicBtn');
    const icon = document.getElementById('musicIcon');
    const audio = document.getElementById('bgMusic');
    let playing = false;

    function updateIcon(){
      if (playing) {
        icon.innerHTML = '<path d="M3 22v-20h4v20h-4zm6 0v-20h4v20h-4z"/>'; // pause icon
        musicBtn.setAttribute('aria-pressed','true');
        musicBtn.style.boxShadow = '0 0 40px #ffd2e6, 0 0 90px #ff80ab';
      } else {
        icon.innerHTML = '<path d="M8 5v14l11-7z"/>'; // play icon
        musicBtn.setAttribute('aria-pressed','false');
        musicBtn.style.boxShadow = '0 0 25px #ff4f81, 0 0 50px #ff99cc';
      }
    }

    musicBtn.addEventListener('click', ()=>{
      playing = !playing;
      if (playing) {
        audio.play().catch(()=>{/* ignore autoplay block */});
      } else {
        audio.pause();
      }
      updateIcon();
    });

    // if user interacts or focuses, allow autoplay attempt
    document.addEventListener('visibilitychange', ()=> {
      if (document.visibilityState === 'visible' && playing) audio.play().catch(()=>{});
    });

    updateIcon();
  })();

  /* ----------------- TYPING EFFECT FOR SUBTITLE ----------------- */
  (function typing(){
    const el = document.getElementById('subtitle');
    const phrases = [
      'Anh v·ªõi em ƒë√¥i ng∆∞·ªùi xa l·∫°',
      'T·ª± ph∆∞∆°ng tr·ªùi ch·∫≥ng h·∫πn l·∫°i quen',
      'Duy√™n s·ªë ƒë∆∞a ta ƒë·∫øn g·∫ßn b√™n nhau',
      'C√πng vi·∫øt n√™n chuy·ªán t√¨nh ƒë·∫πp nh·∫•t',
    ];
    let pi = 0, ci = 0, forward = true, delay = 70;
    function step(){
      const txt = phrases[pi];
      if (forward) {
        ci++;
        el.textContent = txt.slice(0, ci);
        if (ci >= txt.length) { forward = false; setTimeout(step, 1800); return; }
      } else {
        ci--;
        el.textContent = txt.slice(0, ci);
        if (ci <= 0) { forward = true; pi = (pi+1) % phrases.length; }
      }
      setTimeout(step, forward ? delay : 30);
    }
    setTimeout(step, 800);
  })();

  /* ----------------- small accessibility: reduce motion pref ----------------- */
  (function reduceMotion(){
    const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
    if (mq.matches) {
      document.querySelectorAll('*').forEach(n => n.style.animationDuration = '0.01s');
    }
  })();

  /* ----------------- cleanup before unload to stop audio ----------------- */
  window.addEventListener('pagehide', ()=> {
    const a = document.getElementById('bgMusic');
    if (a && !a.paused) { a.pause(); a.currentTime = 0; }
  });
  </script>
</body>
</html>
